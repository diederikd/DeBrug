package Simulatie.editor;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.internal.collections.runtime.IWhereFilter;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import SubjectiefRecht.behavior.Rechtsbetrekking__BehaviorDescriptor;
import Simulatie.behavior.Simulatie__BehaviorDescriptor;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.util.List;
import java.util.ArrayList;
import ObjectiefRecht.behavior.Toestand__BehaviorDescriptor;
import ObjectiefRecht.behavior.Overgang__BehaviorDescriptor;
import ObjectiefRecht.behavior.InstantieVanObject__BehaviorDescriptor;

public class VensterHelper {
  public static boolean DialoogIsGeldig(SNode simulatie, final SNode dialoog) {
    for (SNode objectieveRechtsbetrekking : Sequence.fromIterable(SLinkOperations.collectMany(ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x2469b1b2fe389574L, "regeling")), MetaAdapterFactory.getContainmentLink(0xc4c9a68ece244c5bL, 0x9241c819e554f07cL, 0x544f33b7f1ebdd70L, 0x2469b1b2fccf4331L, "dialogen"))).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return it == dialoog;
      }
    }), MetaAdapterFactory.getContainmentLink(0xc4c9a68ece244c5bL, 0x9241c819e554f07cL, 0x2469b1b2fccf1798L, 0x2469b1b2fccf1799L, "rechtsbetrekkingen")))) {
      for (SNode subjectieveRechtsbetrekking : ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0xa37796bba047244L, "gegevenshuishouding")), MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6807b3aa0b72d4deL, 0x2b935eb9665dcfc2L, "rechtsbetrekkingen")), MetaAdapterFactory.getContainmentLink(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x2b935eb9660efb2eL, 0x2b935eb9660efb2fL, "rechtsbetrekkingen")))) {
        if ((SLinkOperations.getTarget(subjectieveRechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x630944a3c415c89eL, 0x630944a3c415c8a6L, "objectieveRechtsbetrekking")) == SLinkOperations.getTarget(objectieveRechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x8dc4b25f4c49400eL, 0xac370fd230db702cL, 0x202912d6e3aabf26L, 0x202912d6e3aabf27L, "rechtsbetrekking"))) && ((SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x6d2de15fcae8257fL, "rechtssubject1")) == SLinkOperations.getTarget(subjectieveRechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x630944a3c415c89eL, 0x630944a3c415c8a1L, "rechtssubjectMetPlicht")) && SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x1ed85b1d6dac641fL, "rechtssubject2")) == SLinkOperations.getTarget(subjectieveRechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x630944a3c415c89eL, 0x630944a3c415c89fL, "rechtssubjectMetRecht"))) || (SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x6d2de15fcae8257fL, "rechtssubject1")) == SLinkOperations.getTarget(subjectieveRechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x630944a3c415c89eL, 0x630944a3c415c89fL, "rechtssubjectMetRecht")) && SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x1ed85b1d6dac641fL, "rechtssubject2")) == SLinkOperations.getTarget(subjectieveRechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x630944a3c415c89eL, 0x630944a3c415c8a1L, "rechtssubjectMetPlicht")))) && (SPropertyOperations.getBoolean(subjectieveRechtsbetrekking, MetaAdapterFactory.getProperty(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x57de6dcc3687a87eL, 0x57de6dcc3687a786L, "evaluatieresultaat"))) && ((boolean) Rechtsbetrekking__BehaviorDescriptor.IsGeldigOpDatumTijdstip_id2mYdLn7TluB.invoke(subjectieveRechtsbetrekking, Simulatie__BehaviorDescriptor.GeefHuidigTijdstipVanDeSimulatie_id1Enheq$Rvw5.invoke(simulatie, simulatie)))) {
          return true;
        }
      }
    }
    return false;
  }

  public static boolean OvergangIsGeldig(SNode simulatie, SNode overgang, SNode onderwerp) {
    boolean result = false;
    {
      final SNode rechtshandeling = overgang;
      if (SNodeOperations.isInstanceOf(rechtshandeling, MetaAdapterFactory.getConcept(0x8dc4b25f4c49400eL, 0xac370fd230db702cL, 0x611073d615228d3dL, "ObjectiefRecht.structure.Rechtshandeling"))) {
        boolean isUitvoerbareHandeling = false;
        for (SNode uitvoerbarehandeling : ListSequence.fromList(SLinkOperations.getChildren(simulatie, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x3346d8f6cfb01e1fL, "uitvoerbarehandelingen")))) {
          if (SLinkOperations.getTarget(uitvoerbarehandeling, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x3346d8f6cfb01e1cL, 0x3346d8f6cfb01e1dL, "overgang")) == rechtshandeling) {
            isUitvoerbareHandeling = true;
            result = isUitvoerbareHandeling && SPropertyOperations.getBoolean(uitvoerbarehandeling, MetaAdapterFactory.getProperty(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x57de6dcc3687a87eL, 0x57de6dcc3687a786L, "evaluatieresultaat"));
          }
          if (isUitvoerbareHandeling == false) {
            result = false;
          }
        }

      }
    }
    {
      final SNode handelingZonderRechtsgevolg = overgang;
      if (SNodeOperations.isInstanceOf(handelingZonderRechtsgevolg, MetaAdapterFactory.getConcept(0x8dc4b25f4c49400eL, 0xac370fd230db702cL, 0x25299d15220b0f46L, "ObjectiefRecht.structure.HandelingZonderRechtsgevolg"))) {
        boolean isUitvoerbareHandeling = false;
        for (SNode uitvoerbarehandeling : ListSequence.fromList(SLinkOperations.getChildren(simulatie, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x3346d8f6cfb01e1fL, "uitvoerbarehandelingen")))) {
          if (SLinkOperations.getTarget(uitvoerbarehandeling, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x3346d8f6cfb01e1cL, 0x3346d8f6cfb01e1dL, "overgang")) == handelingZonderRechtsgevolg) {
            isUitvoerbareHandeling = true;
            result = isUitvoerbareHandeling && SPropertyOperations.getBoolean(uitvoerbarehandeling, MetaAdapterFactory.getProperty(0x2c493149da1d45e9L, 0x8ea2e0b0cfc3047aL, 0x57de6dcc3687a87eL, 0x57de6dcc3687a786L, "evaluatieresultaat"));
          }
          if (isUitvoerbareHandeling == false) {
            result = false;
          }
        }

      }
    }
    return result;
  }
  public static SNode geefGeldigeEersteOvergang(SNode simulatie) {
    for (SNode overgang : ListSequence.fromList(GeefOvergangen(simulatie))) {
      if (OvergangIsGeldig(simulatie, overgang, SLinkOperations.getTarget(SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x2469b1b2fd186343L, "venster")), MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x2469b1b2fe26441eL, "actieveZaak")))) {
        return overgang;
      }
    }
    return null;
  }

  public static List<SNode> GeefOvergangen(SNode simulatie) {
    List<SNode> overgangen = new ArrayList<SNode>();
    for (SNode rechtsbetrekking : ListSequence.fromList(SLinkOperations.getChildren(SLinkOperations.getTarget(SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x2469b1b2fd186343L, "venster")), MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x6899facf6410934dL, "actieveDialoog")), MetaAdapterFactory.getContainmentLink(0xc4c9a68ece244c5bL, 0x9241c819e554f07cL, 0x2469b1b2fccf1798L, 0x2469b1b2fccf1799L, "rechtsbetrekkingen")))) {
      if (VensterHelper.DialoogIsGeldig(simulatie, SLinkOperations.getTarget(SLinkOperations.getTarget(simulatie, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x6d2de15fcae53fb5L, 0x2469b1b2fd186343L, "venster")), MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x6899facf6410934dL, "actieveDialoog")))) {
        ListSequence.fromList(overgangen).addElement((SNode) Toestand__BehaviorDescriptor.GeefOvergang_id2hDGrbWPFpO.invoke(SLinkOperations.getTarget(rechtsbetrekking, MetaAdapterFactory.getReferenceLink(0x8dc4b25f4c49400eL, 0xac370fd230db702cL, 0x202912d6e3aabf26L, 0x202912d6e3aabf27L, "rechtsbetrekking"))));
      }
    }
    return overgangen;
  }

  public static List<SNode> VerversLijstVanKenmerken(SNode venster) {
    List<SNode> lijstVanKenmerken = Overgang__BehaviorDescriptor.GeefLijstMetInvoerKenmerken_id6$f4rrvMdoa.invoke(SLinkOperations.getTarget(venster, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x6899facf64cde418L, "actieveHandeling")));
    List<SNode> lijstNaarreferentieNaarWaardeVanKenmerken = InstantieVanObject__BehaviorDescriptor.GeefReferentieNaarWaardenVanKenmerk_id3VKsi0pJIjS.invoke(SLinkOperations.getTarget(venster, MetaAdapterFactory.getReferenceLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x2469b1b2fe26441eL, "actieveZaak")), lijstVanKenmerken);
    ListSequence.fromList(SLinkOperations.getChildren(venster, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x6899facf65571e06L, "kenmerken"))).clear();
    ListSequence.fromList(SLinkOperations.getChildren(venster, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x6899facf65571e06L, "kenmerken"))).addSequence(ListSequence.fromList(lijstNaarreferentieNaarWaardeVanKenmerken));
    System.out.println("VensterHelper VerverslijstVanKenmerken " + SLinkOperations.getChildren(venster, MetaAdapterFactory.getContainmentLink(0x15970de38fe74b13L, 0x81c738b38d51c39aL, 0x2469b1b2fd16efbbL, 0x6899facf65571e06L, "kenmerken")));
    return lijstNaarreferentieNaarWaardeVanKenmerken;
  }
}
