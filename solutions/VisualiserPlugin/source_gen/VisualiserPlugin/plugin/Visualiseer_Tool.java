package VisualiserPlugin.plugin;

/*Generated by MPS */

import jetbrains.mps.plugins.tool.GeneratedTool;
import javax.swing.Icon;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JLabel;
import java.awt.Image;
import com.intellij.openapi.project.Project;
import com.intellij.openapi.wm.ToolWindowAnchor;
import jetbrains.mps.workbench.MPSDataKeys;
import com.intellij.ide.DataManager;
import com.intellij.platform.ProjectBaseDirectory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import java.awt.BorderLayout;
import javax.swing.JComponent;

public class Visualiseer_Tool extends GeneratedTool {
  private static final Icon ICON = null;
  private JPanel jPanel;
  private JScrollPane jScrollPane;
  private JLabel jLabel;
  private String graphvizpng;
  private Image image;
  public Visualiseer_Tool(Project project) {
    super(project, "Visualiseer", null, ICON, ToolWindowAnchor.BOTTOM, false);
  }
  public void init(Project project) {
    super.init(project);
    Project MPSproject = MPSDataKeys.PROJECT.getData(DataManager.getInstance().getDataContext());
    Visualiseer_Tool.this.graphvizpng = ProjectBaseDirectory.getInstance(MPSproject).getBaseDir().getCanonicalPath() + "/graphviz/visualiser.png";
    System.out.println("File: " + Visualiseer_Tool.this.graphvizpng);
    ImageIcon imageicon = new ImageIcon(Visualiseer_Tool.this.graphvizpng);
    Image image = imageicon.getImage();
    Image newImage = image.getScaledInstance(300, 300, Image.SCALE_SMOOTH);
    imageicon = new ImageIcon(newImage);
    JButton refreshButton = new JButton("Refresh");
    VisualiseerListener actionListener = new VisualiseerListener();
    actionListener.ZetTool(Visualiseer_Tool.this);
    refreshButton.addActionListener(new VisualiseerListener());
    Visualiseer_Tool.this.jLabel = new JLabel("", imageicon, JLabel.CENTER);
    Visualiseer_Tool.this.jPanel = new JPanel();
    Visualiseer_Tool.this.jScrollPane = new JScrollPane(Visualiseer_Tool.this.jPanel);
    Visualiseer_Tool.this.jPanel.add(refreshButton, BorderLayout.NORTH);
    Visualiseer_Tool.this.jPanel.add(Visualiseer_Tool.this.jLabel, BorderLayout.CENTER);
    Visualiseer_Tool.this.makeAvailable();
  }
  public void Ververs() {
    System.out.println("Ververs figuur met " + Visualiseer_Tool.this.graphvizpng);
    ImageIcon imageicon = new ImageIcon(Visualiseer_Tool.this.graphvizpng);
    Image image = imageicon.getImage();
    Image newImage = image.getScaledInstance(Visualiseer_Tool.this.jPanel.getParent().getWidth(), Visualiseer_Tool.this.jPanel.getParent().getHeight(), Image.SCALE_SMOOTH);
    imageicon = new ImageIcon(newImage);
    Visualiseer_Tool.this.jLabel.setIcon(imageicon);
    Visualiseer_Tool.this.jPanel.revalidate();
    Visualiseer_Tool.this.jPanel.repaint();
  }
  public JComponent getComponent() {
    return Visualiseer_Tool.this.jScrollPane;
  }
}
